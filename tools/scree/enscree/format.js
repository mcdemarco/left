window.storyFormat({
	"name":"Enscree",
	"version":"1.1.1",
	"author":"M. C. DeMarco",
	"description":"Free utility format to export your story for import to Scree.",
	"image":"icon.svg",
	"url":"https://mcdemarco.net/tools/scree/enscree/",
	"license":'MIT License',
	"proofing":true,
	
	"source":"<html>\r\n\t<head>\r\n\t\t<title>{{STORY_NAME}}</title>\r\n\t\t<meta charset=\"UTF-8\">\r\n\t\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js\"></script>\r\n<script type=\"text/javascript\">\r\n/**\r\n * Enscree - Twine 2 Export Story Format\r\n * Based on Entweedle \r\n * \r\n * Copyright (c) 2016 M. C. DeMarco\r\n * https://mcdemarco.net/tools/scree/enscree/\r\n *\r\n * This license applies exclusively to the Enscree story format for Twine 2. No ownership of, nor\r\n * licensing restrictions on, the content within the generated story are stated or implied.\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\r\n * associated documentation files (the \"Software\"), to deal in the Software without restriction,\r\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\r\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\r\n * subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial\r\n * portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT\r\n * LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\nwindow.onload=function(){if(typeof(window.Enscree)==\"undefined\"){window.Enscree={convert:function(){var output=this.export();var blob=new Blob([output],{type:'text/plain;charset=utf-8'});saveAs(blob,'enscreed'+Date.now()+'.txt');},export:function(){var buffer=[];var storyData=window.document.getElementsByTagName(\"tw-storydata\");if(storyData){buffer.push(this.buildPassage(\"StoryTitle\",\"\",storyData[0].getAttribute(\"name\")));}\nvar userScript=window.document.getElementById(\"twine-user-script\");if(userScript){buffer.push(this.buildPassage(\"UserScript\",\"script\",userScript.innerHTML));}\nvar userStylesheet=window.document.getElementById(\"twine-user-stylesheet\");if(userStylesheet){buffer.push(this.buildPassage(\"UserStylesheet\",\"stylesheet\",userStylesheet.innerHTML));}\nvar passages=window.document.getElementsByTagName(\"tw-passagedata\");for(var i=0;i<passages.length;++i){buffer.push(this.buildPassageFromElement(passages[i]));}\nreturn buffer.join('');},buildPassageFromElement:function(passage){var name=passage.getAttribute(\"name\");if(!name){name=\"Untitled Passage\";}\nvar tags=passage.getAttribute(\"tags\");var content=passage.textContent;return this.buildPassage(name,tags,content);},buildPassage:function(title,tags,content){var result=[];result.push(\"## \",title);if(tags){result.push(\"[\",tags,\"]\");}\nresult.push(\"\\n\",this.scrub(content),\"\\n\\n\");return result.join('');},scrub:function(content){if(content){content=content.replace(/^##/gm,\" ##\");}\nreturn content;}}}\nwindow.Enscree.convert();}\t\t\r\n\t\t</script>\r\n\t</head>\r\n\t<body>\r\n\t\t<div id=\"warning\">You can close this window or tab once the story has downloaded.</div>\r\n\t\t<div id=\"storyData\" style=\"display: none;\">\r\n\t\t\t{{STORY_DATA}}\r\n\t\t</div>\r\n\t</body>\r\n</html>"
});
